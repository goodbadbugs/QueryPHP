sudo apt-get update
sudo apt-get upgrade
sudo apt-get dist-upgrade

echo 'You have Ubuntu'
sudo apt-get -y install --reinstall apache2 git mysql-server libapache2-mod-auth-mysql php5-mysql php5
sudo apt-get -y install apache2 git mysql-server libapache2-mod-auth-mysql php5-mysql php5

sudo apt-get -y -f install

# Set script directory
scriptDir=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd)
cd $scriptDir
cd ../../
git submodule init
git submodule update


sudo cp /var/www/html/config/site-config /etc/apache2/sites-enabled/000-default
sudo cp /var/www/html/config/apache2.conf /etc/apache2/conf/apache2.conf
sudo cp /var/www/html/config/site-config.conf /etc/apache2/sites-enabled/000-default.conf

# If apache html directory does not exist, create it
sudo mkdir -p '/var/www/html'
cd $scriptDir
cd '../../public'
./setup

echo "Access your site's main page to setup the admin account";

# Make the database and permissions
mysql -u root < '/var/www/html/MySQL_Scripts/makeDB.sql'

# Set the owner of the web directory and its subdirectories to apache user
  sudo adduser apache apache
  sudo chown -R apache:apache /var/www

sudo apt-get -y dist-upgrade
sudo apt-get -y -f install

echo 'The default password for MySQL root account has been set to "strawberryphp". Please log in to change the root password.';
